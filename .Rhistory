dat <- read.csv("C:/Users/avand/Documents/data/raw_strike_data/arkansas_virginia_rail.csv")
colnames(dat)
dat$Date
install.packages("tidyr")
install.packages("dplyr")
install.packages("reshape")
install.packages("ggplot2")
library(tidyr)
?separate
dat$Date
dat <- dat %>% separate(Date, into=c("month","day","year"), sep="/")
head(dat)
dat$state <- 'Arkansas'
dat <- dat[,c("Species","Location","state","month","day","year")]
head(dat)
write.csv(dat, "C:/Users/avand/Documents/data/cleaned_strike_data/arkansas_virginia_rail.csv")
file_names <- list.files("~/data/cleaned_strike_data/", patter=".csv")
file_names <- file_names[file_names!="cleaned_master_bird_strikes.csv"]
files <- list()
for(i in 1:length(file_names)){
files[[i]] <-  read.csv(paste0("~/data/cleaned_strike_data/","",file_names[i]), strip.white=TRUE)
}
file_names <- list.files("~/data/cleaned_strike_data/", patter=".csv")
file_names <- file_names[file_names!="cleaned_master_bird_strikes.csv"]
file_names
file_names <- list.files("C:/Users/avand/Documents/data/cleaned_strike_data/", patter=".csv")
file_names
file_names <- file_names[file_names!="cleaned_master_bird_strikes.csv"]
file_names
for(i in 1:length(file_names)){
files[[i]] <-  read.csv(paste0("~/data/cleaned_strike_data/","",file_names[i]), strip.white=TRUE)
}
for(i in 1:length(file_names)){
files[[i]] <-  read.csv(paste0("C:Users/avand/Documents/data/cleaned_strike_data/","",file_names[i]), strip.white=TRUE)
}
files <- list()
for(i in 1:length(file_names)){
files[[i]] <-  read.csv(paste0("C:Users/avand/Documents/data/cleaned_strike_data/","",file_names[i]), strip.white=TRUE)
}
paste0("C:Users/avand/Documents/data/cleaned_strike_data/","",file_names[i])
for(i in 1:length(file_names)){
files[[i]] <-  read.csv(paste0("C:/Users/avand/Documents/data/cleaned_strike_data/","",file_names[i]), strip.white=TRUE)
}
dat <- read.csv("C:/Users/avand/Documents/data/raw_strike_data/arkansas_virginia_rail.csv")
dat <- dat %>% separate(Date, into=c("month","day","year"), sep="/")
dat$state <- 'Arkansas'
dat <- dat[,c("Species","Location","state","month","day","year")]
colnames(dat) <- c("spp","city","state","month","day","year")
write.csv(dat, "C:/Users/avand/Documents/data/cleaned_strike_data/arkansas_virginia_rail.csv")
file_names <- list.files("C:/Users/avand/Documents/data/cleaned_strike_data/", patter=".csv")
file_names <- file_names[file_names!="cleaned_master_bird_strikes.csv"]
files <- list()
for(i in 1:length(file_names)){
files[[i]] <-  read.csv(paste0("C:/Users/avand/Documents/data/cleaned_strike_data/","",file_names[i]), strip.white=TRUE)
}
cnames <- c("spp","city","month","day","year","state","county")
for(i in 1:length(files)){
df <- files[[i]]
dfnames <- colnames(df)
df <- df[intersect(cnames, dfnames)]
df[setdiff(cnames, dfnames)] <- NA
# df$id <- as.character(df$id)
# df$genus <- as.character(df$genus)
df$spp <- as.character(df$spp)
# df$country <- as.character(df$country)
df$city <- as.character(df$city)
# df$sex <- as.character(df$location)
df$day <- as.numeric(df$day)
df$month <- as.character(df$month)
df$year <- as.numeric(df$year)
# df$age <- as.character(df$age)
# df$city <- as.character(df$city)
# df$commonname <- as.character(df$commonname)
# df$other  <- as.character(df$other)
# df$month_name <- as.character(df$month_name)
# df$count <- as.numeric(df$count)
files[[i]] <- df
}
files[[1]]
head(files[[1]])
master <- do.call(rbind, files)
master$state <- tolower(master$state)
master <- master[!is.na(master$state),]
master[master$state=="ohio",]$state <- "oh"
master[master$state=="minnesota",]$state <- "mn"
master <- master[!is.na(master$spp),]
railsp <- c("Sora","carolina","Virginia Rail","limicola","Yellow Rail")
master <- master[master$spp %in% railsp,]
master[master$state=="Arkansas",]
master <- do.call(rbind, files)
master[master$state=="Arkansas",]
master$state <- tolower(master$state)
master[master$state=="Arkansas",]
master <- do.call(rbind, files)
master$state %>% unique
master$state <- as.character(master$state)
master$state <- tolower(master$state)
master$state %>% unique
master <- master[!is.na(master$state),]
master$state %>% unique
master <- do.call(rbind, files)
master$state <- as.character(master$state)
master$state <- tolower(master$state)
master <- master[!is.na(master$state),]
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
master$state <- trim(master$state)
master$state %>% unique()
master[master$state=="ohio",]$state <- "oh"
master[master$state=="minnesota",]$state <- "mn"
master[master$state=="arkansas",]$state <- "ar"
master$state %>% unique()
master <- master[!is.na(master$spp),]
master[master$spp=="Sora Rail",]$spp <- "sora"
master$spp %>% unique
master[master$spp=="Sora Rail",]$spp <- "Sora"
railsp <- c("Sora","carolina","Virginia Rail","limicola","Yellow Rail")
master <- master[master$spp %in% railsp,]
master <- do.call(rbind, files)
master$state <- as.character(master$state)
master$state <- tolower(master$state)
master <- master[!is.na(master$state),]
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
master$state <- trim(master$state)
master[master$state=="ohio",]$state <- "oh"
master[master$state=="minnesota",]$state <- "mn"
master[master$state=="arkansas",]$state <- "ar"
master <- master[!is.na(master$spp),]
master[master$spp=="Sora Rail",]$spp <- "Sora"
railsp <- c("Sora","carolina","Virginia Rail","limicola","Yellow Rail")
master <- master[master$spp %in% railsp,]
master$spp %>% unique
master[master$spp=="carolina",]$spp <- "Sora"
master[master$spp=="limicola",]$spp <- "Virginia Rail"
master$spp %>% unique
write.csv(master, file="~/data/cleaned_strike_data/cleaned_master_bird_strikes.csv")
write.csv(master, file="C:/Users/avand/Documents/data/cleaned_strike_data/cleaned_master_bird_strikes.csv")
b <- read.csv("C:/Users/avand/Documents/data/Fournier_rails_BS_201512071317.csv")
d <- read.csv("C:/Users/avand/Documents/data/Fournier_rails_Es_201512071317.csv")
head(b)
head(d)
head(d)
enc <- b[b$BAND_NUM %IN% d$BAND_NUM,]
enc <- b[b$BAND_NUM %in% d$BAND_NUM,]
enc
nrow(enc)
colnames(enc)
enc <- enc[,c("BAND_NUM","SPECIES_NAME","BANDING_DATE","LAT_10_MIN_BLK","LON_10_MIN_BLK"),]
head(enc)
colnames(d)
d <- d[,c("BAND_NUM","B_LAT_10_MIN_BLK","B_LON_10_MIN_BLK","BANDING_DATE","ENCOUNTER_DATE","E_LON_10_MIN_BLK","E_LAT_10_MIN_BLK","B_SPECIES_NAME")]
plot(d$B_LAT_10_MIN_BLK, d$B_LON_10_MIN_BLK)
points(d$E_LAT_10_MIN_BLK, d$E_LAT_10_MIN_BLK, color="black")
points(d$E_LAT_10_MIN_BLK, d$E_LAT_10_MIN_BLK, col="black")
points(d$E_LAT_10_MIN_BLK, d$E_LAT_10_MIN_BLK, fill="black")
?points
points(d$E_LAT_10_MIN_BLK, d$E_LAT_10_MIN_BLK, fill="black", type="p")
points(d$E_LAT_10_MIN_BLK, d$E_LAT_10_MIN_BLK, col="black", type="p")
plot(d$B_LAT_10_MIN_BLK, d$B_LON_10_MIN_BLK)
points(d$E_LAT_10_MIN_BLK, d$E_LAT_10_MIN_BLK, col="black", type="p")
ggplot()+geom_point(data=d, aes(x="B_LAT_10_MIN_BLK",y="B_LON_10_MIN_BLK"))
library(ggplot2)
ggplot()+geom_point(data=d, aes(x="B_LAT_10_MIN_BLK",y="B_LON_10_MIN_BLK"))
str(d)
ggplot()+geom_point(data=d, aes(x=B_LAT_10_MIN_BLK,y=B_LON_10_MIN_BLK))
ggplot()+geom_point(data=d, aes(x=B_LAT_10_MIN_BLK,y=B_LON_10_MIN_BLK))+geom_point(data=d, aes(x=E_LAT_10_MIN_BLK, y=E_LONG_10_MIN_BLK), col="red")
ggplot()+geom_point(data=d, aes(x=B_LAT_10_MIN_BLK,y=B_LON_10_MIN_BLK))+geom_point(data=d, aes(x=E_LAT_10_MIN_BLK, y=E_LON_10_MIN_BLK), col="red")
db <- d[,c("BAND_NUM","B_LAT_10_MIN_BLK","B_LON_10_MIN_BLK","BANDING_DATE","B_SPECIES_NAME")]
de <- d[,c("BAND_NUM","E_LAT_10_MIN_BLK","E_LON_10_MIN_BLK", "ENCOUNTER_DATE","B_SPECIES_NAME")]
cnames <- c("bandnumber","lat","lon","date","spp")
colnames(db) <- cnames
colnames(de) <- cnames
dd <- rbind(db, de)
ggplot()+geom_path(data=de, aes(x=lat,y=lon,group=bandnumber))
ggplot()+geom_point(data=de, aes(x=lat,y=lon,group=bandnumber))
ggplot()+geom_path(data=de, aes(x=lat,y=lon,group=bandnumber))
str(dd)
dd <- dd[order(dd$bandnumber),]
head(dd)
ggplot()+geom_path(data=de, aes(x=lat,y=lon,group=bandnumber))
ggplot()+geom_path(data=de, aes(x=lat,y=lon))
ggplot()+geom_path(data=de, aes(x=lat,y=lon, color=bandnumber))
nrow(dd)
72/2
ggplot()+geom_path(data=de, aes(x=lat,y=lon, color=bandnumber), group=bandnumber)
ggplot()+geom_path(data=de, aes(x=lat,y=lon, color=bandnumber), group="bandnumber")
ggplot()+geom_path(data=de, aes(x=lat,y=lon), group="bandnumber")
ggplot()+geom_path(data=de, aes(x=lat,y=lon, group=bandnumber))
ggplot()+geom_line(data=de, aes(x=lat,y=lon, group=bandnumber))
head(de)
ggplot()+geom_line(data=de, aes(x=lat,y=lon, group=as.factor(bandnumber)))
ggplot()+geom_line(data=de, aes(x=lat,y=lon))
ggplot()+geom_line(data=de, aes(x=lat,y=lon, fill=bandnumber))
ggplot()+geom_line(data=de, aes(x=lat,y=lon, fill=bandnumber, group=bandnumber))
ggplot()+geom_line(data=de[de$bandnumber==98348662,], aes(x=lat,y=lon))
ggplot()+geom_line(data=de[de$bandnumber==98348662,], aes(x=lat,y=lon, group-1))
ggplot()+geom_line(data=de[de$bandnumber==98348662,], aes(x=lat,y=lon, group=1))
de[de$bandnumber==98348662,]
ggplot()+geom_path(data=dd, aes(x=lat,y=lon, group=bandnumber))
ggplot()+geom_path(data=dd, aes(x=lat,y=lon, group=bandnumber))
ggplot()+geom_path(data=dd, aes(x=lon,y=lat, group=bandnumber))
ggplot()+geom_path(data=dd, aes(x=lon,y=lat, group=bandnumber))+geom_point(data=dd, aes(x=lon,y=lat))
install.packages("rworldmap")
library(rworldmap)
mapCountryData()
mapCountryData(mapRegion="northamerica")
mapHalfDegreeGridToCountries()
write.csv(dd, file="C:/Users/avand/Document/data/recap_rails.csv")
write.csv(dd, file="C:/Users/avand/Documents/data/recap_rails.csv")
dd
dd$latd <- dd$lat/10
dd
dd$lond <- dd$lon/10
dd
write.csv(dd, file="C:/Users/avand/Documents/data/recap_rails.csv")
dd$latd <- dd$lat/10
dd$lond <- -dd$lon/10
dd
write.csv(dd, file="C:/Users/avand/Documents/data/recap_rails.csv")
